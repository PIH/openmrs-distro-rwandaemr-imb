<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/muzima.css" rel="stylesheet">
    <link href="css/ui-darkness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/additional-methods.min.js"></script>
    <script src="js/jquery-autocomplete-min.js"></script>
    <script src="js/muzima.js"></script>

    <title>Diagnosis</title>
</head>
<body class="col-md-10 col-md-offset-1">
<div id="pre_populate_data"></div>
<form id="DiabetesCardiovascularCheckup_form" name="DiabetesCardiovascularCheckup_form">
    <div class="section">
        <h3>Encounter Details</h3>
        <div class="form-group">
            <label for="encounter.location_id">Location Name:<span class="required">*</span></label>
            <input class="form-control valid-location-only" id="encounter.location_id" type="text" placeholder="Start typing something..."
                   required="required">
            <input class="form-control" name="encounter.location_id" type="hidden">
        </div>
        <div class="form-group">
            <label for="encounter.provider_id_select">Provider:</label>
            <input class="form-control valid-provider-only" id="encounter.provider_id_select" type="text" placeholder="Start typing something...">
            <input class="form-control" name="encounter.provider_id_select" type="hidden">
        </div>
        <div class="form-group hidden">
            <select id="select_providers"></select>
        </div>
        <div class="form-group show_provider_id_text">
            <label for="encounter.provider_id">Provider's system-id:<span class="required">*</span></label>
            <input class="form-control checkDigit" id="encounter.provider_id" name="encounter.provider_id"
                   type="text" required="required" disabled="disabled">
        </div>
        <div class="form-group">
            <label for="encounter.encounter_datetime">Encounter Date:<span class="required">*</span></label>
            <input class="form-control datepicker nonFutureDate past-date" id="encounter.encounter_datetime"
                   name="encounter.encounter_datetime" type="text" readonly="readonly"
                   required="required">
        </div>
        <div class="form-group">
            <input class="form-control" id="encounter.form_uuid" name="encounter.form_uuid"
                   type="hidden" required="required">
        </div>
    </div>
    <div class="section">
        <h3>DEMOGRAPHICS</h3>

        <div class="form-group">
            <input class="form-control" id="patient.uuid"
                   name="patient.uuid" type="hidden" readonly="readonly">
        </div>
        <div class="form-group">
            <label for="patient.medical_record_number">Patient identifier:</label>
            <input class="form-control" id="patient.medical_record_number"
                   name="patient.medical_record_number" type="text" readonly="readonly">
        </div>
        <div class="form-group">
            <label for="patient.given_name">Given Name:</label>
            <input class="form-control" id="patient.given_name" name="patient.given_name" type="text"
                   readonly="readonly">
        </div>
        <div class="form-group">
            <label for="patient.middle_name">Middle Name:</label>
            <input class="form-control" id="patient.middle_name" name="patient.middle_name" type="text"
                   readonly="readonly">
        </div>
        <div class="form-group">
            <label for="patient.family_name">Family Name:</label>
            <input class="form-control" id="patient.family_name" name="patient.family_name" type="text"
                   readonly="readonly">
        </div>
        <div class="form-group">
            <label for="patient.sex">Gender:</label>
            <select class="form-control" id="patient.sex" name="patient.sex" disabled="disabled">
                <option value="">...</option>
                <option value="M">Male</option>
                <option value="F">Female</option>
            </select>
        </div>
        <div class="form-group">
            <label for="patient.birth_date">Date Of Birth:</label>
            <input class="form-control" id="patient.birth_date" name="patient.birth_date" type="text"
                   readonly="readonly" disabled="disabled">
        </div>
    </div>
    <hr/>
    <h3>Diagnosis </h3>
<!--    <div class="form-group">-->
<!--        <fieldset>-->
<!--            <label>-->
<!--                Confirmed cancer?-->
<!--            </label>-->
<!--            <br/>-->
<!--            <label class="font-normal">-->
<!--                <input class="activate" id="obs.yesCancerConfimed" name="CancerConfimed" type="radio"-->
<!--                       data-concept="3d762b82-f951-4d13-b147-6aaba63b25d1^CONFIRMED DIAGNOSIS^99DCT"-->
<!--                       value="3cd6f600-26fe-102b-80cb-0017a47871b2^YES^99DCT">-->
<!--                Cancer Confirmed-->
<!--            </label>-->
<!--            <br/>-->
<!--            <label class="font-normal">-->
<!--                <input class="deactivate" id="obs.noCancerConfimed" name="CancerConfimed" type="radio"-->
<!--                       data-concept="3d762b82-f951-4d13-b147-6aaba63b25d1^CONFIRMED DIAGNOSIS^99DCT"-->
<!--                       value="3cd6f86c-26fe-102b-80cb-0017a47871b2^NO^99DCT">-->
<!--                Not Cancer-->
<!--            </label>-->
<!--        </fieldset>-->
<!--    </div>-->
<!--    <div class="form-group">-->
<!--        <fieldset>-->
<!--            <div class="CancerConfimed">-->
<!--                <label>-->
<!--                    Cancer Diagnosis:-->
<!--                </label>-->
<!--            </div>-->
<!--            <br/>-->
<!--            <div class="CancerConfimed">-->
<!--                <label class="font-normal">-->
<!--                    <input id="obs.BreastCancer" name="obs.CancerDiagnosis" type="radio"-->
<!--                           data-concept="3dc2eb50-6981-43d3-b907-e3dd8b5ed620^Confirmed cancer diagnosis^99DCT"-->
<!--                           value="e1bd83f4-e9fa-4564-b8aa-74a9b199aca8^Breast Cancer^99DCT">-->
<!--                    Breast Cancer-->
<!--                </label>-->
<!--            </div>-->
<!--            <br/>-->
<!--            <div class="CancerConfimed">-->
<!--                <label class="font-normal">-->
<!--                    Histology:-->
<!--                    <textarea class="form-control" id="obs.BreastCancerHistory"-->
<!--                              name="obs.BreastCancerHistory" type="text"  cols="80"-->
<!--                              data-concept="7625e1b7-7571-485e-b023-20a7d03dc7dc^Breast Cancer Histology^99DCT"></textarea>-->
<!--                </label>-->
<!--            </div>-->
<!--            <br/>-->
<!--            <div class="CancerConfimed">-->
<!--                <label class="font-normal">-->
<!--                    <input id="obs.cervicalCancer" name="obs.CancerDiagnosis" type="radio"-->
<!--                           data-concept="3dc2eb50-6981-43d3-b907-e3dd8b5ed620^Confirmed cancer diagnosis^99DCT"-->
<!--                           value="36052b70-ba49-466f-a4eb-bc99581be7a2^Cervical cancer^99DCT">-->
<!--                    Cervical Cancer-->
<!--                </label>-->
<!--            </div>-->
<!--            <br/>-->
<!--            <div class="CancerConfimed">-->
<!--                <label class="font-normal">-->
<!--                    Histology:-->
<!--                    <textarea class="form-control" id="obs.CervicalCancerHistory"-->
<!--                              name="obs.CervicalCancerHistory" type="text"  cols="80"-->
<!--                              data-concept="3cef6fc6-49e1-490c-829f-d9003a7b50ad^Cervical cancer Histology^99DCT"></textarea>-->
<!--                </label>-->
<!--            </div>-->
<!--            <br/>-->
<!--            <div class="CancerConfimed">-->
<!--                <label class="font-normal">-->
<!--                    <input id="obs.other" name="obs.CancerDiagnosis" type="radio"-->
<!--                           data-concept="3dc2eb50-6981-43d3-b907-e3dd8b5ed620^Confirmed cancer diagnosis^99DCT"-->
<!--                           value="3cee7fb4-26fe-102b-80cb-0017a47871b2^OTHER NON-CODED^99DCT">-->
<!--                    Other cancer-->
<!--                </label>-->
<!--            </div>-->
<!--            <br/>-->
<!--            <div class="CancerConfimed">-->
<!--                <label class="font-normal">-->
<!--                    Histology:-->
<!--                    <textarea class="form-control" id="obs.otherCancerHistory"-->
<!--                              name="obs.otherCancerHistory" type="text"-->
<!--                              data-concept="b99ff54e-4e1b-4277-89ab-136eab980621^Other Histology^99DCT"></textarea>-->
<!--                </label>-->
<!--            </div>-->
<!--            <br/>-->
<!--            <label class="font-normal"> <strong> Date of next visit:  </strong> </label>-->
<!--            <br/>-->
<!--            <label class="font-normal">-->
<!--                <input readonly="readonly" class="form-control datepicker future-or-today-date" id="obs.BreastDispositionNextDate" name="obs.BreastDispositionNextDate" type="text"-->
<!--                       data-concept="3ce94df0-26fe-102b-80cb-0017a47871b2^RETURN VISIT DATE^99DCT" nextVisitDate/>-->
<!--            </label>-->
<!--        </fieldset>-->
<!--    </div>-->

    <div>
        <fieldset>
            <div class="section LevelOfCare">
                <h3 class="font-normal">Biopsy</h3>
                <br/>
                <label class="font-normal"> <strong> Biopsy previously performed ? </strong> </label>
                <br/>
                <label class="font-normal">
                    <input  class="activate" id="BiopsyPerformedYes" name="BiopsyPerformed" type="checkbox"
                            data-concept="5563e827-9a1e-40eb-b05b-81d55981ce6d^Biopsy performed^99DCT"
                            value="3cd6f600-26fe-102b-80cb-0017a47871b2^YES^99DCT">
                    Yes
                </label>
                <br/>
                <label class="font-normal">
                    <input  class="deactivate" id="BiopsyPerformedNo" name="BiopsyPerformed" type="checkbox"
                            data-concept="5563e827-9a1e-40eb-b05b-81d55981ce6d^Biopsy performed^99DCT"
                            value="3cd6f86c-26fe-102b-80cb-0017a47871b2^NO^99DCT">
                    No
                </label>
                <br/>
                <!--            <label class="font-normal">  Date Performed: </label>-->
                <!--            <label class="font-normal">-->
                <!--                <input id="obs.DateBiopsyPerformed" class="form-control" name="obs.DateBiopsyPerformed"-->
                <!--                       type="Date" data-concept="a9a2d145-e50e-4ceb-9fa9-9ad467c5dda2^BIOPSY DATE^99DCT"/>-->
                <!--            </label>-->
                <br/><br/>
                <div class="BiopsyPerformed">
                    <label class="font-normal"><strong> Biopsy results received since last visit </strong></label>
                    <br/>
                    <label class="font-normal">
                        <input id="BiopsyResultsSquamousMetaplasia" name="obs.BiopsyResults" type="checkbox"
                               data-concept="89b01201-80c7-4690-93de-2e587d427bd5^BIOPSY RESULT coded^99DCT"
                               value="8303e328-bf92-4cbc-bb23-a81312de0cff^Squamous metaplasia^99DCT">
                        Squamous metaplasia
                    </label>
                    <br/>
                    <label class="font-normal">
                        <input id="BiopsyResultsCIN1" name="obs.BiopsyResults" type="checkbox"
                               data-concept="89b01201-80c7-4690-93de-2e587d427bd5^BIOPSY RESULT coded^99DCT"
                               value="56db2876-4469-4e2d-9f95-01972592d964^cervical intraepithelial neoplasia 1^99DCT">
                        CIN 1
                    </label>
                    <br/>
                    <label class="font-normal">
                        <input id="BiopsyResultsCIN2" name="obs.BiopsyResults" type="checkbox"
                               data-concept="89b01201-80c7-4690-93de-2e587d427bd5^BIOPSY RESULT coded^99DCT"
                               value="853dd92d-f9bc-4b4d-b806-c763c01e4378^cervical intraepithelial neoplasia 2^99DCT">
                        CIN 2
                    </label>
                    <br/>
                    <label class="font-normal">
                        <input id="BiopsyResultsCIN3" name="obs.BiopsyResults" type="checkbox"
                               data-concept="89b01201-80c7-4690-93de-2e587d427bd5^BIOPSY RESULT coded^99DCT"
                               value="d98f5c34-6158-42cd-b7bd-0934749dee25^cervical intraepithelial neoplasia 3^99DCT">
                        CIN 3
                    </label>
                    <br/>
                    <label class="font-normal">
                        <input id="BiopsyResultsCIS" name="obs.BiopsyResults" type="checkbox"
                               data-concept="89b01201-80c7-4690-93de-2e587d427bd5^BIOPSY RESULT coded^99DCT"
                               value="f8a41deb-0549-414e-abaa-cc20141b9d20^carcinoma in-situ^99DCT">
                        CIS
                    </label>
                    <br/>
                    <label class="font-normal">
                        <input class="activate" id="BiopsyResultsInvasiveCancer" name="obs.BiopsyResults" type="checkbox"
                               data-concept="89b01201-80c7-4690-93de-2e587d427bd5^BIOPSY RESULT coded^99DCT"
                               value="3ce5d01c-26fe-102b-80cb-0017a47871b2^INVASIVE CERVICAL CARCINOMA^99DCT">
                        Invasive cancer
                    </label>
                    <br/>
                    <label class="font-normal">
                        <input id="BiopsyResultsOther" name="obs.BiopsyResults" type="checkbox"
                               data-concept="89b01201-80c7-4690-93de-2e587d427bd5^BIOPSY RESULT coded^99DCT"
                               value="3cee7fb4-26fe-102b-80cb-0017a47871b2^OTHER NON-CODED^99DCT">
                        Other:
                    </label>
                    <br/>
                    <label class="font-normal">
                        <input id="obs.BiopsyResultsOtherSpecify" class="form-control" name="obs.BiopsyResults"
                               type="text" data-concept="bd551dfc-e4c8-4bf1-bea1-96e831d934b2^BIOPSY RESULT Text^99DCT"/>
                    </label>
                </div>
                <div class="form-group">
                    <fieldset>
                        <label>
                            Confirmed cancer?
                        </label>
                        <br/>
                        <label class="font-normal">
                            <input class="activate" id="obs.yesCancerConfimed" name="CancerConfimed" type="radio"
                                   data-concept="3d762b82-f951-4d13-b147-6aaba63b25d1^CONFIRMED DIAGNOSIS^99DCT"
                                   value="3cd6f600-26fe-102b-80cb-0017a47871b2^YES^99DCT">
                            Cancer Confirmed
                        </label>
                        <br/>
                        <label class="font-normal">
                            <input class="deactivate" id="obs.noCancerConfimed" name="CancerConfimed" type="radio"
                                   data-concept="3d762b82-f951-4d13-b147-6aaba63b25d1^CONFIRMED DIAGNOSIS^99DCT"
                                   value="3cd6f86c-26fe-102b-80cb-0017a47871b2^NO^99DCT">
                            Not Cancer
                        </label>
                    </fieldset>
                </div>
                <div class="form-group">
                    <fieldset>
                        <div class="CancerConfimed">
                            <label>
                                Cancer Diagnosis:
                            </label>
                        </div>
                        <br/>
                        <div class="CancerConfimed">
                            <label class="font-normal">
                                <input id="BreastCancer" name="CancerDiagnosis" type="checkbox"
                                       data-concept="3dc2eb50-6981-43d3-b907-e3dd8b5ed620^Confirmed cancer diagnosis^99DCT"
                                       value="e1bd83f4-e9fa-4564-b8aa-74a9b199aca8^Breast Cancer^99DCT">
                                Breast Cancer
                            </label>
                        </div>
                        <br/>
                        <div class="CancerConfimed">
                            <label class="font-normal">
                                Histology:
                                <textarea class="form-control" id="obs.BreastCancerHistory"
                                          name="obs.BreastCancerHistory" type="text"  cols="80"
                                          data-concept="7625e1b7-7571-485e-b023-20a7d03dc7dc^Breast Cancer Histology^99DCT"></textarea>
                            </label>
                        </div>
                        <br/>
                        <div class="CancerConfimed">
                            <label class="font-normal">
                                <input id="cervicalCancer" name="CancerDiagnosis" type="checkbox"
                                       data-concept="3dc2eb50-6981-43d3-b907-e3dd8b5ed620^Confirmed cancer diagnosis^99DCT"
                                       value="36052b70-ba49-466f-a4eb-bc99581be7a2^Cervical cancer^99DCT">
                                Cervical Cancer
                            </label>
                        </div>
                        <br/>
                        <div class="CancerConfimed">
                            <label class="font-normal">
                                Histology:
                                <textarea class="form-control" id="obs.CervicalCancerHistory"
                                          name="obs.CervicalCancerHistory" type="text"  cols="80"
                                          data-concept="3cef6fc6-49e1-490c-829f-d9003a7b50ad^Cervical cancer Histology^99DCT"></textarea>
                            </label>
                        </div>
                        <br/>
                        <div class="CancerConfimed">
                            <label class="font-normal">
                                <input id="other" name="CancerDiagnosis" type="checkbox"
                                       data-concept="3dc2eb50-6981-43d3-b907-e3dd8b5ed620^Confirmed cancer diagnosis^99DCT"
                                       value="3cee7fb4-26fe-102b-80cb-0017a47871b2^OTHER NON-CODED^99DCT">
                                Other cancer
                            </label>
                        </div>
                        <br/>
                        <div class="CancerConfimed">
                            <label class="font-normal">
                                Histology:
                                <textarea class="form-control" id="obs.otherCancerHistory"
                                          name="obs.otherCancerHistory" type="text" cols="80"
                                          data-concept="b99ff54e-4e1b-4277-89ab-136eab980621^Other Histology^99DCT"></textarea>
                            </label>
                        </div>
                        <br/>
<!--                        <label class="font-normal"> <strong> Date of next visit:  </strong> </label>-->
<!--                        <br/>-->
<!--                        <label class="font-normal">-->
<!--                            <input readonly="readonly" class="form-control datepicker future-or-today-date" id="obs.BreastDispositionNextDate" name="obs.BreastDispositionNextDate" type="text"-->
<!--                                   data-concept="3ce94df0-26fe-102b-80cb-0017a47871b2^RETURN VISIT DATE^99DCT" readonly="readonly"/>-->
<!--                        </label>-->
                    </fieldset>
                </div>
            </div>
        </fieldset>

    </div>


    <div>
        <input id="save_draft" name="save_draft" type="submit" value="Draft"/>
        <input id="submit_form" name="submit_form" type="submit" value="submit"/>
    </div>
</form>

</body>
<script type="text/javascript">
        $(document).ready(function () {
           var dateFormat = "dd-mm-yy";
            var currentDate = $.datepicker.formatDate(dateFormat, new Date());
            var encounterDatetime = $('#encounter\\.encounter_datetime');
            if ($(encounterDatetime).val() == "") {
                $(encounterDatetime).val(currentDate);
            }

            $('#save_draft').click(function () {
            $(this).prop('disabled', true);
            document.saveDraft(this);
            $(this).prop('disabled', false);
            });
            $('#submit_form').click(function () {
                $(this).prop('disabled', true);
                document.submit();
                $(this).prop('disabled', false);
            });

            document.setupAutoCompleteData('encounter\\.location_id');
            document.setupValidationForLocation("$('#encounter\\.location_id').val()","encounter\\.location_id");
            document.setupAutoCompleteDataForProvider('encounter\\.provider_id_select');
            document.setupValidationForProvider("$('#encounter\\.provider_id_select').val()","encounter\\.provider_id");
            $('#encounter\\.provider_id_select').change(function () {
                if ($('#encounter\\.provider_id_select').val() === '') {
                    $('#encounter\\.provider_id').val('');
                       $('.show_provider_id_text').show();
                }
            });
            $('.future-or-today-date').change(function () {
                if ($(this).is(':visible') && $(this).val() != '') {
                    var errors = {};
                    var pattern = /(\d{2})-(\d{2})-(\d{4})/g;
                    var matches = pattern.exec($(this).val());
                    var enteredDate = new Date(matches[3], matches[2] - 1, matches[1]);
                    var today = new Date(new Date().getFullYear(),new Date().getMonth(),new Date().getDate());
                    if (enteredDate < today) {
                        errors[$(this).attr('name')] = "Please enter present or future date.";
                    }
                    toggleValidationMessages(errors);
                }
            });
            // helps in hide and show. Just set name of checkbox/radio to equate
            // the class on div to hide, set activate/deactive class on the checkbox/radio
            // to be clicked
            $(document).on("click", function(event){
                var classOfClicked = event.target.className;
                var nameOfClicked = event.target.name;
                var idOfClicked = event.target.id

                if($("input[id='"+idOfClicked+"']").prop('checked')){
                    if(classOfClicked=="activate" ){
                        $("div."+nameOfClicked).show();
                    }
                    else if (classOfClicked=="deactivate"){
                        $("div."+nameOfClicked).hide();
                    }
                }
                else if(!$("input[id='"+idOfClicked+"']").prop('checked')){
                    if(classOfClicked=="activate" ){
                        $("div."+nameOfClicked).hide();
                    }
                    else if (classOfClicked=="deactivate"){
                        $("div."+nameOfClicked).show();
                    }
                }
            });
            $(".initialHide").hide();
        });
</script>

</html>
